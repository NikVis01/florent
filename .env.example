# ==============================================================================
# FLORENT CONFIGURATION
# ==============================================================================

# ------------------------------------------------------------------------------
# OpenAI / LLM Configuration
# ------------------------------------------------------------------------------
OPENAI_API_KEY=your_openai_api_key_here
LLM_MODEL=gpt-4o-mini

# ------------------------------------------------------------------------------
# BGE-M3 Embedding Configuration
# ------------------------------------------------------------------------------
# Lighter option: semitechnologies/transformers-inference:sentence-transformers-all-MiniLM-L6-v2-onnx-latest
BGE_M3_URL=http://localhost:8080
BGE_M3_MODEL=BAAI/bge-m3

# ------------------------------------------------------------------------------
# Cross-Encoder Configuration
# ------------------------------------------------------------------------------
CROSS_ENCODER_ENDPOINT=http://localhost:8080
USE_CROSS_ENCODER=true
# Health check timeout in seconds when verifying cross-encoder service availability
CROSS_ENCODER_HEALTH_TIMEOUT=2
# Request timeout in seconds for embedding/scoring requests
CROSS_ENCODER_REQUEST_TIMEOUT=10
# Fallback score (0-1) when cross-encoder service fails
CROSS_ENCODER_FALLBACK_SCORE=0.5

# ------------------------------------------------------------------------------
# Agent Orchestrator Configuration
# ------------------------------------------------------------------------------
# Maximum number of exponential backoff retries for failed DSPy calls
AGENT_MAX_RETRIES=3
# Enable/disable disk-based caching for node assessments
AGENT_CACHE_ENABLED=true
# Directory for DSPy result caching
DSPY_CACHE_DIR=~/.cache/florent/dspy_cache
# Default importance score (0-1) for nodes when DSPy evaluation fails
AGENT_DEFAULT_IMPORTANCE=0.5
# Default influence score (0-1) for nodes when DSPy evaluation fails
AGENT_DEFAULT_INFLUENCE=0.5
# Estimated token count per node evaluation (for cost tracking)
AGENT_TOKENS_PER_EVAL=300
# Estimated token count per discovery operation (for cost tracking)
AGENT_TOKENS_PER_DISCOVERY=500
# Base for exponential backoff (wait_time = base ** attempt)
AGENT_BACKOFF_BASE=2

# ------------------------------------------------------------------------------
# Graph Builder Configuration
# ------------------------------------------------------------------------------
# Controls how quickly influence/risk scores decay as they propagate through the graph
DEFAULT_ATTENUATION_FACTOR=1.2
# Maximum distance (hops) from the entry point node the agent will traverse
MAX_TRAVERSAL_DEPTH=10
# Similarity score floor (0-1). Below this, the agent triggers "Hidden Dependency Discovery"
GRAPH_GAP_THRESHOLD=0.3
# Maximum number of iterative "Gap Analysis -> Discovery" cycles per project build
GRAPH_MAX_ITERATIONS=10
# Global hard limit on the number of nodes the agent can generatively discover per project
GRAPH_MAX_DISCOVERED_NODES=50
# Default weight for sequential edges in initial graph build
GRAPH_DEFAULT_EDGE_WEIGHT=0.8
# Distance decay factor for edge weight calculation (weight = similarity * decay^distance)
GRAPH_DISTANCE_DECAY_FACTOR=0.9
# Maximum number of new nodes to discover per capability gap
GRAPH_MAX_NODES_PER_GAP=3
# Minimum weight for edges connecting discovered nodes
GRAPH_DISCOVERED_MIN_WEIGHT=0.4
# Default weight for discovered node edges
GRAPH_DISCOVERED_DEFAULT_WEIGHT=0.6
# Weight for edges created by recursive discovery
GRAPH_DISCOVERED_EDGE_WEIGHT=0.8
# Weight for infrastructure sustainment edges to exit node
GRAPH_INFRASTRUCTURE_WEIGHT=0.5
# Weight for edges bridging capability gaps
GRAPH_BRIDGE_GAP_WEIGHT=0.7
# Minimum weight for gap-bridging edges
GRAPH_BRIDGE_GAP_MIN_WEIGHT=0.5
# Maximum number of gaps to process per iteration
GRAPH_MAX_GAPS_PER_ITERATION=5

# ------------------------------------------------------------------------------
# Matrix Classification Configuration
# ------------------------------------------------------------------------------
# Threshold (0-1) for classifying nodes as "high influence"
MATRIX_INFLUENCE_THRESHOLD=0.6
# Threshold (0-1) for classifying nodes as "high importance"
MATRIX_IMPORTANCE_THRESHOLD=0.6
# Threshold (0-1) for classifying nodes as "high risk" in legacy matrix
MATRIX_HIGH_RISK_THRESHOLD=0.7
# Threshold (0-1) for classifying nodes as "high influence" in legacy matrix
MATRIX_HIGH_INFLUENCE_THRESHOLD=0.7

# ------------------------------------------------------------------------------
# Bidding Decision Logic Configuration
# ------------------------------------------------------------------------------
# Maximum ratio (0-1) of critical dependencies allowed on critical path before rejecting bid
BID_CRITICAL_DEP_MAX_RATIO=0.5
# Minimum bankability score (0-1) required to recommend bidding
BID_MIN_BANKABILITY_THRESHOLD=0.7

# ------------------------------------------------------------------------------
# Recommendation Generation Configuration
# ------------------------------------------------------------------------------
# Confidence threshold (0-1) for high-confidence recommendations
RECOMMENDATION_HIGH_CONFIDENCE=0.9
# Confidence threshold (0-1) for low-confidence recommendations
RECOMMENDATION_LOW_CONFIDENCE=0.6
# Bankability threshold (0-1) for "strong bankability" classification
RECOMMENDATION_BANKABILITY_HIGH=0.8
# Bankability threshold (0-1) for "moderate bankability" classification
RECOMMENDATION_BANKABILITY_MEDIUM=0.6

# ------------------------------------------------------------------------------
# Pipeline Risk Propagation Configuration
# ------------------------------------------------------------------------------
# Minimum edge weight when building initial linear graph
PIPELINE_MIN_EDGE_WEIGHT=0.6
# Weight decay per edge in sequential graph (weight = initial - i * decay)
PIPELINE_EDGE_WEIGHT_DECAY=0.05
# Initial edge weight for first edge in sequential graph
PIPELINE_INITIAL_EDGE_WEIGHT=0.9
# Multiplier for risk propagation formula (combined_risk = local + max_parent * local * factor)
PIPELINE_RISK_PROPAGATION_FACTOR=0.5
# Minimum aggregate risk threshold for detecting critical chains
PIPELINE_CRITICAL_CHAIN_THRESHOLD=0.1
# Default budget (number of node evaluations) for analysis pipeline
PIPELINE_DEFAULT_BUDGET=100

# ------------------------------------------------------------------------------
# Metrics & Defaults
# ------------------------------------------------------------------------------
# Default critical failure likelihood when no chains are detected
METRICS_DEFAULT_FAILURE_LIKELIHOOD=0.5
